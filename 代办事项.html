<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<!-- 关键的移动端视口设置 -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>我的待办事项</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#4F46E5',
        secondary: '#EC4899',
        neutral: {
          100: '#F9FAFB',
          200: '#F3F4F6',
          300: '#E5E7EB',
          400: '#D1D5DB',
          500: '#9CA3AF',
          600: '#6B7280',
          700: '#4B5563',
          800: '#1F2937',
          900: '#111827',
        }
      },
      fontFamily: {
        inter: ['Inter', 'system-ui', 'sans-serif'],
      },
    }
  }
}
</script>

<style type="text/tailwindcss">
@layer utilities {
  .content-auto {
    content-visibility: auto;
  }
  .touch-friendly {
    touch-action: manipulation; /* 防止双击缩放 */
  }
  .mobile-shadow {
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
  }
}
</style>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');

body {
  font-family: 'Inter', system-ui, sans-serif;
  background-color: #f8fafc;
  padding: 0;
  margin: 0;
  min-height: 100vh;
}

/* 移动端优化的滚动条 */
::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

/* 动画效果 */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.todo-item {
  animation: fadeIn 0.3s ease forwards;
}

/* 复选框优化 - 更大的触控区域 */
.checkbox {
  position: relative;
  appearance: none;
  height: 26px; /* 移动端更大的复选框 */
  width: 26px;
  border-radius: 6px;
  border: 2px solid #cbd5e1;
  transition: all 0.2s ease;
}

.checkbox:checked {
  background-color: #4F46E5;
  border-color: #4F46E5;
}

.checkbox:checked::after {
  content: '✓';
  position: absolute;
  color: white;
  font-size: 16px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* 删除按钮在移动端始终可见一部分 */
.delete-btn {
  opacity: 0.6; /* 移动端默认显示一点，提升可用性 */
  transition: all 0.2s ease;
}

.todo-item:hover .delete-btn,
.todo-item:active .delete-btn {
  opacity: 1;
}

/* 防止文本溢出 */
.todo-text {
  overflow-wrap: break-word;
  word-wrap: break-word;
  hyphens: auto;
}
</style>
</head>
<body class="p-0">
  <!-- 全屏容器，适应移动设备 -->
  <div class="w-full min-h-screen flex flex-col">
    <!-- 顶部导航栏，固定在顶部便于操作 -->
    <div class="bg-gradient-to-r from-primary to-purple-600 p-5 shadow-md">
      <h1 class="text-[clamp(1.3rem,5vw,1.8rem)] font-bold text-white text-center">
        我的待办事项
      </h1>
    </div>

    <!-- 主要内容区域，可滚动 -->
    <div class="flex-1 overflow-y-auto bg-neutral-50">
      <!-- 添加新任务区域 - 固定在顶部便于快速添加 -->
      <div class="bg-white p-4 border-b border-neutral-200 sticky top-0 z-10 mobile-shadow">
        <form id="add-todo-form" class="flex gap-2">
          <input 
            type="text" 
            id="new-todo" 
            placeholder="添加新任务..." 
            class="flex-1 px-4 py-3.5 rounded-lg border border-neutral-300 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none text-neutral-800 text-base"
            autocomplete="off"
          >
          <button 
            type="submit" 
            class="bg-primary hover:bg-primary/90 text-white px-4 py-3.5 rounded-lg font-medium transition-all flex items-center justify-center touch-friendly"
          >
            <i class="fa fa-plus text-lg"></i>
          </button>
        </form>
      </div>

      <!-- 任务统计 - 小屏幕优化 -->
      <div class="px-4 py-3 bg-white border-b border-neutral-200 flex justify-between items-center">
        <div class="text-neutral-600 text-sm">
          <span id="todo-count" class="font-semibold text-primary">15</span> 项任务
        </div>
        <button id="clear-completed" class="text-neutral-500 hover:text-secondary text-sm font-medium transition-all touch-friendly px-2 py-1">
          清除已完成
        </button>
      </div>

      <!-- 待办事项列表 -->
      <ul id="todo-list" class="divide-y divide-neutral-200 bg-white">
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">完成项目报告</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">回复所有未读邮件</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">准备周三的会议演示文稿</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">预约牙医</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">购买本周的杂货</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <!-- 其他任务项保持不变 -->
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">去健身房锻炼</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">阅读一小时的书</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">整理桌面文件</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">给家人打电话</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">规划下个月的旅行</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">学习一个新的JavaScript框架</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">支付水电费账单</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">打扫公寓</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">遛狗</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
        <li class="todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly">
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">更新个人作品集网站</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        </li>
      </ul>

      <!-- 空状态提示 -->
      <div id="empty-state" class="hidden p-12 text-center bg-white">
        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-neutral-100 mb-4">
          <i class="fa fa-check-circle-o text-2xl text-neutral-400"></i>
        </div>
        <h3 class="text-lg font-medium text-neutral-800 mb-2">所有任务已完成！</h3>
        <p class="text-neutral-500">添加新的任务继续保持高效吧</p>
      </div>
    </div>

    <!-- 底部信息 - 在移动端固定底部 -->
    <div class="bg-white py-3 px-4 border-t border-neutral-200 text-center">
      <p class="text-neutral-500 text-sm">
        优雅待办 &copy; 2023
      </p>
    </div>
  </div>

  <script>
    // 获取DOM元素
    const todoList = document.getElementById('todo-list');
    const addTodoForm = document.getElementById('add-todo-form');
    const newTodoInput = document.getElementById('new-todo');
    const todoCountElement = document.getElementById('todo-count');
    const clearCompletedButton = document.getElementById('clear-completed');
    const emptyState = document.getElementById('empty-state');

    // 更新任务计数
    function updateTodoCount() {
      const totalTodos = todoList.querySelectorAll('li').length;
      todoCountElement.textContent = totalTodos;
      
      // 检查是否所有任务都已完成
      const completedTodos = todoList.querySelectorAll('.checkbox:checked').length;
      if (totalTodos === 0) {
        emptyState.classList.remove('hidden');
      } else if (totalTodos === completedTodos) {
        emptyState.classList.remove('hidden');
      } else {
        emptyState.classList.add('hidden');
      }
    }

    // 添加新任务
    addTodoForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const todoText = newTodoInput.value.trim();
      
      if (todoText) {
        // 创建新的任务项
        const newTodo = document.createElement('li');
        newTodo.className = 'todo-item px-4 py-4 flex items-center justify-between hover:bg-neutral-50 transition-all touch-friendly';
        newTodo.innerHTML = `
          <div class="flex items-center gap-3">
            <input type="checkbox" class="checkbox">
            <span class="text-neutral-800 text-base todo-text">${todoText}</span>
          </div>
          <button class="delete-btn text-neutral-400 hover:text-red-500 transition-all p-2">
            <i class="fa fa-trash-o text-lg"></i>
          </button>
        `;
        
        // 添加到列表顶部
        todoList.prepend(newTodo);
        
        // 清空输入框并保持焦点，方便连续输入
        newTodoInput.value = '';
        newTodoInput.focus();
        
        // 更新计数
        updateTodoCount();
      }
    });

    // 处理任务项点击事件
    todoList.addEventListener('click', function(e) {
      // 处理复选框点击
      if (e.target.classList.contains('checkbox')) {
        const todoText = e.target.nextElementSibling;
        if (e.target.checked) {
          todoText.classList.add('line-through', 'text-neutral-500');
        } else {
          todoText.classList.remove('line-through', 'text-neutral-500');
        }
        updateTodoCount();
      }
      
      // 处理删除按钮点击
      if (e.target.closest('.delete-btn')) {
        const todoItem = e.target.closest('li');
        
        // 添加删除动画
        todoItem.style.opacity = '0';
        todoItem.style.transform = 'translateX(20px)';
        todoItem.style.height = `${todoItem.offsetHeight}px`;
        todoItem.style.marginBottom = '0';
        todoItem.style.overflow = 'hidden';
        
        setTimeout(() => {
          todoItem.remove();
          updateTodoCount();
        }, 300);
      }
    });

    // 清除已完成任务
    clearCompletedButton.addEventListener('click', function() {
      const completedTodos = Array.from(todoList.querySelectorAll('.checkbox:checked')).map(cb => cb.closest('li'));
      
      completedTodos.forEach((todo, index) => {
        // 错开删除动画时间，创造流畅效果
        setTimeout(() => {
          todo.style.opacity = '0';
          todo.style.transform = 'translateX(20px)';
          todo.style.height = `${todo.offsetHeight}px`;
          todo.style.marginBottom = '0';
          todo.style.overflow = 'hidden';
          
          setTimeout(() => {
            todo.remove();
            updateTodoCount();
          }, 300);
        }, index * 100);
      });
    });

    // 初始化计数
    updateTodoCount();

    // 移动端优化：点击输入框时自动滚动到顶部
    newTodoInput.addEventListener('focus', function() {
      setTimeout(() => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 100);
    });

    // 支持键盘操作：按Enter添加任务，按Escape取消输入
    newTodoInput.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        this.blur();
      }
    });
  </script>
</body>
</html>